<div class="loginInputs">
  <div class="rowAlign">
    <div class="col pageLogo">
      <img src="\assets\images\_11707f36-6180-48c1-b259-16214f3e3e34.jpeg">
    </div>
    <div class="col">
      <!-- Login form -->
      <div class="columnContent" *ngIf="inputState">
        <h2>Inicio de sesión</h2>
        <h3>Introduzca sus credenciales de usuario</h3>
        <form class="example-form" [formGroup]="loginForm">
          <mat-form-field class="example-full-width" appareance="fill">
            <mat-label>Correo electrónico</mat-label>
            <input type="email" [maxLength]="100" matInput formControlName="email" placeholder="Correo electrónico">
            <mat-icon matSuffix>person</mat-icon>
            <mat-error *ngIf="loginForm.controls.email.hasError('required')">
              <strong>Se requiere el usuario</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="example-full-width" appareance="fill">
            <mat-label>Contraseña</mat-label>
            <input type="password" [minLength]="2" [maxLength]="256" matInput formControlName="password"
              placeholder="Contraseña" [type]="hidePasswordLogin ? 'password' : 'text'">
            <button mat-icon-button matSuffix (click)="hidePasswordLogin = !hidePasswordLogin"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePasswordLogin">
              <mat-icon>{{hidePasswordLogin ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <mat-error *ngIf="loginForm.controls.password.hasError('required')">
              <strong>Se requiere la contraseña</strong>
            </mat-error>
          </mat-form-field>
          <button mat-flat-button class="buttonSpace" color="primary" [disabled]="!loginForm.valid"
            (click)="login()">Iniciar sesión</button>
          <mat-error *ngIf="loginMessage !== ''">
            <strong>{{ loginMessage }}</strong>
          </mat-error>
        </form>
        <div class="rowAlign">
          <p>¿No tiene cuenta?</p>
          <button mat-button class="buttonSpace" color="accent" (click)="changeInputState()">Regístrese aquí</button>
        </div>
      </div>
      <!-- Register form -->
      <div class="columnContent" *ngIf="!inputState">
        <h2>Registro de usuario</h2>
        <h3>Introduzca sus datos y pulse el botón de registro</h3>
        <form class="example-form" [formGroup]="registerForm">
          <mat-form-field class="example-full-width" appareance="fill">
            <mat-label>Nombre de usuario</mat-label>
            <input type="text" [maxLength]="100" matInput formControlName="username" placeholder="AntonioTuto">
            <mat-error *ngIf="registerForm.controls.username.hasError('required')">
              <strong>Se requiere el nombre de usuario</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="example-full-width" appareance="fill">
            <mat-label>Correo electrónico</mat-label>
            <input type="email" [minLength]="8" [maxLength]="100" matInput formControlName="email"
              placeholder="ejemplo@gmail.com">
            <mat-error *ngIf="registerForm.controls.email.hasError('required')">
              <strong>Se requiere el correo electrónico</strong>
            </mat-error>
            <mat-error *ngIf="registerForm.controls.email.hasError('pattern')">
              <strong>Debe cumplir el formato de correo electrónico</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="example-full-width" appareance="fill">
            <mat-label>Contraseña</mat-label>
            <input type="password" #passwordRegister matInput [maxLength]="256" formControlName="password"
              placeholder="Contraseña" [type]="hidePasswordRegister ? 'password' : 'text'">
            <button mat-icon-button matSuffix (click)="hidePasswordRegister = !hidePasswordRegister"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePasswordRegister">
              <mat-icon>{{hidePasswordRegister ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            @if(passwordRegister.value === '') {
              <mat-hint align="start">La contraseña debe contener al menos 8 caracteres, incluyendo una letra mayuscula,
                una letra minúscula y un número</mat-hint>
            }
            <mat-error *ngIf="registerForm.controls.password.hasError('required')">
              <strong>Se requiere la contraseña</strong>
            </mat-error>
            <mat-error *ngIf="registerForm.controls.password.hasError('pattern')">
              <strong>La contraseña debe contener al menos 8 caracteres, incluyendo una letra mayuscula,
                una letra minúscula y un número</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="example-full-width" appareance="fill">
            <mat-label>Confirmar contraseña</mat-label>
            <input type="password" [minLength]="8" [maxLength]="256" matInput formControlName="passwordConfirm"
              placeholder="Contraseña" [type]="hidePasswordConfirm ? 'password' : 'text'">
            <button mat-icon-button matSuffix (click)="hidePasswordConfirm = !hidePasswordConfirm"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePasswordConfirm">
              <mat-icon>{{hidePasswordConfirm ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <mat-error *ngIf="registerForm.controls.passwordConfirm.hasError('required')">
              <strong>Se requiere la contraseña</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="example-chip-list">
            <mat-label>Guías afines</mat-label>
            <mat-chip-grid #chipGrid1 aria-label="Guide types">
              @for (guideType of chosenTypes; track guideType) {
              <mat-chip-row #chipRow1 (removed)="removeType(guideType)">
                {{guideType}}
                <button matChipRemove [attr.aria-label]="'remove ' + guideType">
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
              }
            </mat-chip-grid>
            <input placeholder="Introduzca los tipos de guía" #guideTypeInput formControlName="guideTypes"
              [matChipInputFor]="chipGrid1" [matAutocomplete]="auto" />
            <mat-hint align="start">{{chosenTypes.length}}/5</mat-hint>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selectedType($event)">
              @for (guideType of filteredTypes | async; track guideType) {
              <mat-option [value]="guideType" *ngIf="!chosenTypes.includes(guideType | titlecase)">{{guideType |
                titlecase}}</mat-option>
              }
            </mat-autocomplete>
          </mat-form-field>
          <button mat-flat-button class="buttonSpace" color="primary" [disabled]="!registerForm.valid"
            (click)="register()">Registrarse</button>
          <mat-error *ngIf="registerMessage !== ''">
            <strong>{{ registerMessage }}</strong>
          </mat-error>
        </form>
        <div class="rowAlign">
          <p>¿Ya tienes cuenta?</p>
          <button mat-button class="buttonSpace" color="accent" (click)="changeInputState()">Inicia sesión</button>
        </div>
      </div>
    </div>
  </div>
</div>