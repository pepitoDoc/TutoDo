<div class="page">
  <div class="alignGrid">
    <div *ngFor="let guide of guidesFound">
      <mat-card class="example-card guideCard">
        <mat-card-header>
          <mat-card-title>{{ guide.title }}</mat-card-title>
          <mat-card-subtitle>Usuario creador: johnny poppers</mat-card-subtitle>
        </mat-card-header>
        <mat-divider></mat-divider>
        <mat-card-content class="guideResume">
          <div class="guideInfo">
            <p><strong>Guía sobre:</strong>{{ formatGuideTypes(guide.guideTypes) }}</p>
            <p><strong>Comentarios:</strong> {{ guide.comments.length }}</p>
            <p><strong>Puntuación media:</strong> {{ ratingMean(guide.ratings) }}</p>
            <p><strong>Estado de publicación:</strong> {{ guide.published ? 'Publicado' : 'No publicado' }}</p>
          </div>
          <div class="guideInfo">
            <img mat-card-image [src]="guide.thumbnail 
              ? 'data:image/jpeg;base64,' + guide.thumbnail 
              : '/assets/images/_11707f36-6180-48c1-b259-16214f3e3e34-logo.jpeg'">
          </div>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-content>
          <p>
            {{ guide.description }}
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button (click)="visualizeGuide(guide.id)">Visualizar guía</button>
          <button mat-button color="accent" (click)="editGuideSteps(guide.id)">Editar pasos</button>
          <button mat-button color="accent" (click)="editGuideInfo(guide.id)">Editar información</button>
          <button mat-button color="warn" (click)="deleteGuide(guide.id)">Borrar guía</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>